<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1; user-scalable=1; interactive-widget=resizes-content;"/>
		<title>Ägir</title>
		<link rel="icon" href="favicon.png" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400..500&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400..500&display=swap" rel="stylesheet">
		
		<link rel="stylesheet" href="assets/css/main.css"/>
		<link rel="stylesheet" href="assets/css/theme.css"/>
		<link rel="stylesheet" href="assets/css/utils.css"/>
		<link rel="stylesheet" href="assets/css/components.css"/>
		<script type="module" src="assets/index.js"></script>

		<link rel="prefetch" href="assets/gfx/send.svg" />
	</head>

	<body>
		<ram-tabs id="tabs-main" tab="chats">
			<ram-tab key="chats">
				<div class="main col pad float-center">
					<div class="row">
						<button class="lineout fit" data-to="settings">settings</button>
						<button class="lineout fit" data-to="library">library</button>
					</div>
					<ram-file-picker id="main-chats-import" accept=".jsonl">
						<!-- <img src="assets/gfx/placeholder.png" /> -->
						<div class="lineout fit">import a chat in SillyTavern format</div>
					</ram-file-picker>
					<div class="placeholder">no chats found</div>
					<button class="lineout fit" data-to="play">play (test)</button>
				</div>
			</ram-tab>
			<ram-tab key="settings">
				<div class="main col pad float-center">
					<button class="lineout fit" data-to="chats">back</button>
					<details>
						<summary>
							Personas
						</summary>
						<div id="settings-persona-form" class="list">
							<div id="settings-persona-list" class="virtual"></div>
							<hr/>
							<div class="row">
								<ram-image-picker id="settings-persona-picture" class="lineout pointer"></ram-image-picker>
								<div class="list wide">
									<input type="text" id="settings-persona-name" class="lineout wide" placeholder="Persona name" />
									<button id="settings-persona-picture-clear" class="lineout" hidden>Clear picture</button>
								</div>
							</div>
							<textarea id="settings-persona-desc" class="lineout" placeholder="Persona description"></textarea>
							<button id="settings-add-persona" class="lineout">Add persona</button>
						</div>
					</details>
					<details>
						<summary>
							Engines
						</summary>
						<div class="list">
							<div class="hint">
								Click engine entry to edit
							</div>
							<div id="settings-engines-list" class="virtual">
							</div>
							<hr/>
							<div class="hint">
								Any OpenAI-compatible LLM provider is supported, including OpenRouter and AI Horde
							</div>
							<ram-labeled
								legend="Display name"
								id="settings-engines-name"
								class="strip wide"
								placeholder="Goober"
							></ram-labeled>
							<ram-labeled
								legend="API URL"
								id="settings-engines-url"
								class="strip wide"
								placeholder="https://openrouter.ai/api/v1/chat/completions"
							></ram-labeled>
							<ram-labeled
								legend="API key"
								id="settings-engines-key"
								class="strip wide"
								placeholder="sk-or-v1-haha-nope"
							></ram-labeled>
							<ram-labeled
								legend="Model"
								id="settings-engines-model"
								class="strip wide"
								placeholder="xiaomi/mimo-v2-flash:free"
							></ram-labeled>
							<hr/>
							<div class="hint">
								Temperature controls randomness. Lower = focused, higher = creative
							</div>
							<ram-labeled
								legend="Temperature (0.0-2.0)"
								id="settings-engines-temp"
								class="strip wide"
								placeholder="0.9"
								value="0.9"
							></ram-labeled>
							<ram-labeled
								legend="Response length limit (in tokens, 0 = unlimited)"
								id="settings-engines-max"
								class="strip wide"
								placeholder="720"
								value="720"
							></ram-labeled>
							<ram-labeled
								legend="Context size"
								id="settings-engines-context"
								class="strip wide"
								placeholder="16384"
								value="16384"
							></ram-labeled>
							<button id="settings-engines-submit" class="lineout">Add engine</button>
						</div>
					</details>
					<details>
						<summary>
							rEmber
						</summary>
						<div class="list">
							<div class="hint">Stride is a number of message pairs (model + user) that will be summarized. 0 to disable automatic runs</div>
							<ram-labeled
								legend="Stride"
								id="settings-rember-stride"
								class="strip wide"
								placeholder="2"
							></ram-labeled>
							<ram-labeled
								legend="Prompt"
								id="settings-rember-prompt"
								class="strip wide"
								multiline
							></ram-labeled>
							<ram-labeled
								legend="State template"
								id="settings-rember-template"
								class="strip wide"
								multiline
							></ram-labeled>
						</div>
					</details>
					<details>
						<summary>
							Backup & Sync
						</summary>
						<div class="list">
							<button id="settings-backup-save" class="lineout">Save all</button>
							<ram-file-picker id="settings-backup-import" accept=".json">
								<div class="lineout">Import</div>
							</ram-file-picker>
						</div>
					</details>
					<details>
						<summary>
							Options
						</summary>
						<div id="settings-themes" class="row-wrap"></div>
					</details>
				</div>
			</ram-tab>
			<ram-tab key="library">
				<div class="main col pad float-center">
					<div class="row">
						<button class="lineout fit" data-to="chats">back</button>
						<button class="lineout fit" data-to="scenario-editor">new scenario</button>
					</div>
				</div>
				<div id="library-cards" class="grid-list"></div>
			</ram-tab>
			<ram-tab key="scenario-editor">
				<div class="main col pad float-center">
					<div class="row">
						<button class="lineout fit" data-to="library">back</button>
						<button id="scenario-submit-button" class="lineout">Save scenario</button>
					</div>
					<div class="scenario-pictures">
						<div class="list">
							<div>Card icon</div>
							<ram-image-picker id="scenario-card-picture" class="lineout pointer"></ram-image-picker>
						</div>
						<div class="list">
							<div>Chat icon</div>
							<ram-image-picker id="scenario-chat-picture" class="lineout pointer"></ram-image-picker>
						</div>
					</div>
					
					<ram-labeled
						legend="Card title"
						id="scenario-card-title"
						class="strip wide"
						placeholder=""
					></ram-labeled>
					<ram-labeled
						legend="Card description"
						id="scenario-description"
						class="strip wide"
						placeholder=""
						multiline
					></ram-labeled>
					<button id="scenario-preview-button" class="lineout">Card description preview</button>
					<div id="scenario-preview" class="lineout" hidden></div>
					<ram-labeled
						legend="Tags"
						id="scenario-tags"
						class="strip wide"
						placeholder="comma separated"
						multiline
						rows="1"
					></ram-labeled>
					<div class="list">
						<hr/>
						<div class="hint">Character definiton below</div>
					</div>
					<ram-labeled
						legend="Character name"
						id="scenario-character-name"
						class="strip wide"
						placeholder=""
					></ram-labeled>
					<ram-labeled
						legend="Scenario definition"
						id="scenario-defintion"
						class="strip wide"
						placeholder=""
						multiline
						rows="1"
					></ram-labeled>
					<div class="list">
						<div id="scenario-messages-clicker" class="row">
							<button class="lineout">&lt;</button>
							<div>1/1</div>
							<button class="lineout">&gt;</button>
						</div>
						<ram-labeled
							legend="First message"
							id="scenario-messages"
							class="strip wide"
							placeholder=""
							multiline
							rows="1"
						></ram-labeled>
					</div>
				</div>
			</ram-tab>
			<ram-tab key="play">
				<div class="chat-layout">
					<div class="chat-top shadow">
						<div class="row content-wide float-center">
							<button class="lineout fit" data-to="chats">back</button>
						</div>
					</div>
					<div class="chat-scroll-container content-wide float-center">
						<div class="message">
							<img src="assets/gfx/aegir.png" />
							<div>
								<div class="message-name">Ägir</div>
								<div class="message-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus dolor felis, tempus ac elit non, faucibus imperdiet neque. Morbi non facilisis neque. Donec molestie facilisis lobortis. Mauris sit amet erat semper, bibendum dui at, ultricies ante. Nullam id molestie dolor, in consequat velit. Sed convallis varius turpis, consequat aliquet felis fermentum a. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer vel leo sit amet elit aliquet molestie eget non purus. Vivamus nec rhoncus felis. Proin finibus convallis ligula, nec suscipit libero pretium vel. Nullam sit amet magna at nibh consequat molestie in in justo. Phasellus molestie neque sit amet ligula tincidunt lacinia. Cras euismod gravida felis eget aliquam. Cras lobortis sem ante, quis convallis purus luctus quis. Cras elementum vel magna nec laoreet. Quisque rhoncus est sodales, varius quam at, gravida justo.</div>
							</div>
						</div>
						<div class="message">
							<img src="assets/gfx/eh.jpeg" />
							<div>
								<div class="message-name">Sundowner</div>
								<div class="message-text">*dies irae venit* poena dei venit</div>
							</div>
						</div>
					</div>
					<div class="shadow">
						<div class="chat-low content-wide float-center">
							<ram-tabs id="chat-controls" tab="main">
								<ram-tab key="main">
									<textarea id="chat-textarea" class="lineout"></textarea>
									<ram-import path="assets/gfx/send.svg" class="chat-send"></ram-import>
								</ram-tab>
								<ram-tab key="pending">
									<button class="lineout float-center">abort</button>
								</ram-tab>
								<ram-tab key="disabled">
									<div>Pick a model to use chat</div>
								</ram-tab>
							</ram-tabs>
						</div>
					</div>
				</div>
			</ram-tab>
		</ram-tabs>
	</body>

	<template id="template-theme-selector">
		<svg class="settings-theme-selector-button" viewBox="0 0 6 1" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M0,0 l100,0 l0,1 l-100,0 Z"
				fill="var(--color-base)"
			/>
			<path
				d="M1,1 l1,-1 L100,0 L100,1 Z"
				fill="var(--color-secondary)"
			/>
			<path
				d="M2,1 l1,-1 L100,0 L100,1 Z"
				fill="var(--color-accent)"
			/>
			<path
				d="M3,1 l1,-1 L100,0 L100,1 Z"
				fill="var(--color-text)"
			/>
			<path
				d="M4,1 l1,-1 L100,0 L100,1 Z"
				fill="var(--color-base)"
			/>
		</svg>
	</template>
</html>
